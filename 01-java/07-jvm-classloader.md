
JVM类加载机制

## 类加载过程

加载，链接（验证，准备，解析），初始化

### 加载

* Class文件获取
* ZIP包中读取（比如从jar包和war包中读取）
* 运行时计算生成（动态代理）
* 由其它文件生成

### 验证

### 准备

为类变量分配内存并设置类变量的初始值阶段，即在方法区中分配这些变量所使用的内存空间

### 解析

虚拟机将常量池中的符号引用替换为直接引用的过程

### 初始化

开始真正执行类中定义的Java程序代码
执行类构造器<client>方法的过程

## 类加载器

### 类加载器分类

1. 启动类加载器(Bootstrap ClassLoader)：负责加载 JAVA_HOME\lib 目录中的，或通过-Xbootclasspath参数指定路径中的，且被虚拟机认可（按文件名识别，如rt.jar）的类。
2. 扩展类加载器(Extension ClassLoader)：负责加载 JAVA_HOME\lib\ext 目录中的，或通过java.ext.dirs系统变量指定路径中的类库。
3. 应用程序类加载器(Application ClassLoader)：负责加载用户路径（classpath）上的类库。


### 双亲委派模型
当一个类加载器收到类加载任务，会先交给其父类加载器去完成，因此最终加载任务都会传递到顶层的启动类加载器，只有当父类加载器无法完成加载任务时，才会尝试执行加载任务。

保证了使用不同的类加载器最终得到的都是同样一个Object对象。