《深入分析Linux内核源代码》陈莉君 人民邮电出版社

- 进程 中断机制、进程描述、进程调度与切换、Linux 启动系统
- 内存 Linux 内存管理
- 文件系统 虚拟文件系统、Ext2 文件系统、模块机制、设备驱动程序
- 网络 
- 进程间通信

## 第一章 走进Linux
### 1.5 Linux 内核结构
1. 进程调度（SCHED）控制着进程对 CPU 的访问
2. 内存管理（MM）允许多个进程安全地共享主内存区域
3. 虚拟文件系统（Virtul File System，VFS）隐藏了各种不同硬件的具体细节。
   可分为逻辑文件系统和设备驱动程序。
4. 网络接口（NET）提供了对各种网络标准协议的存取和各种网络硬件的支持。
   可分为网络协议和网络驱动程序。
5. 进程间通信（IPC） 支持进程间各种通信机制。

## 第二章 Linux 运行的硬件基础
### 2.1 i386 的寄存器
### 2.2 内存地址
### 2.3 段机制和描述符
### 2.4 分页机制
### 2.5 Linux 中的分页机制
### 2.6 Linux 中的汇编语言

## 第三章 中断机制
!> 为克服对 I/O 接口控制采用程序查询所带来的处理器低效率而产生的。中断控制的主要优点是只有在I/O 需要服务时才能得到处理器的响应，而不需要处理器不断地进行查询。由此，最初的中断全部是对外部设备而言的，即称为外部中断（或硬件中断）。

中断的适用范围也随之扩大，出现了所谓的内部中断（或叫异常），它是为解决机器运行时所出现的某些随机事件及编程方便而出现的。

### 3.2 中断描述符表的初始化
### 3.3 异常处理
### 3.4 中断处理

## 第四章 进程描述
### 4.1 进程和程序（Process and Program）
所谓进程是由正文段（Text）、用户数据段（User Segment）以及系统数据段（System Segment）共同组成的一个执行环境。

程序只是一个普通文件，是一个机器代码指令和数据的集合，这些指令和数据存储在磁盘上的一个可执行映像（Executable Image）中，所以，程序是一个静态的实体。

### 4.2 Linux 中的进程概述
### 4.3 task_struct 结构描述
### 4.4 task_struct 结构在内存中的存放
### 4.5 进程组织方式
1. 哈希表 Linux 在进程中引入的哈希表叫做pidhash，在 include/linux/sched.h 
2. 双向循环链表
3. 运行队列
4. 进程的运行队列链表
5. 等待队列

### 4.6 内核线程
内核线程（thread）或叫守护进程（daemon）。“d”结尾的进程名。

> 内核线程也可以叫内核任务，它们周期性地执行，例如，磁盘高速缓存的刷新，网络连接的维护，页面的换入换出等。

内核线程是由 kernel_thread( )函数在内核态下创建的，这个函数所包含的代码大部分是内联式汇编语言。

### 4.7 进程的权能
### 4.8 内核同步
1. 信号量
2. 原子操作
3. 自旋锁、读写自旋锁和大读者自旋锁

## 第五章 进程调度与切换
### 5.1 Linux 时间系统
### 5.2 时钟中断
### 5.3 Linux 的调度程序—Schedule()
### 5.4 进程切换
为了控制进程的执行，内核必须有能力挂起正在 CPU 上运行的进程，并恢复以前挂起的
某个进程的执行。这种行为被称为进程切换，任务切换，或上下文切换。

## 第六章 Linux 内存管理
层次结构：cpu(寄存器、内部cache)、外部cache、主存、磁盘
### 6.2 Linux 内存管理的初始化
### 6.3 内存的分配和回收
### 6.4 地址映射机制
### 6.5 请页机制
### 6.6 交换机制
### 6.7 缓存和刷新机制
### 6.8 进程的创建和执行

## 第七章 进程间通信
### 7.1 管道
!> 所谓管道，是指用于连接一个读进程和一个写进程，以实现它们之间通信的共享文件，又称 pipe 文件。

### 7.2 信号（signal）
!> 信号机制是在软件层次上对**中断机制**的模拟。信号和中断都是“异步”的。

### 7.3 System V 的IPC 机制
!> 为了提供与其他系统的兼容性，Linux 也支持 3 种 system Ⅴ的进程间通信机制：消息、
信号量（semaphores）和共享内存，Linux 对这些机制的实施大同小异。我们把信号量、消
息和共享内存统称 System V IPC 的对象，每一个对象都具有同样类型的接口，即系统调用

1. 信号量
2. 消息队列
3. 共享内存

## 第八章 虚拟文件系统
### 8.1 概述
我们把 VFS 称为内核的一个子系统，其他子系统只与VFS 打交道，而并不与具体文件系统发生联系。
对具体文件系统来说，VFS 是一个管理者，而对内核的其他子系统来说，VFS 是它们与具体文件系统的一个接口。

VFS 提供一个统一的接口（实际上就是 file_operatoin 数据结构），一个具体文件系统要想被 Linux 支持，
就必须按照这个接口编写自己的操作函数，而将自己的细节对内核其他子系统隐藏起来。

VFS 主要有以下几个作用
1. 对具体文件系统的数据结构进行抽象，以一种统一的数据结构进行管理。
2. 接受用户层的系统调用，例如 write、open、stat、link 等。
3. 支持多种具体文件系统之间相互访问。
4. 接受内核其他子系统的操作请求，特别是内存管理子系统。

### 8.2 VFS 中的数据结构
1. 超级块对象
2. 索引节点对象
3. 目录项对象
4. 文件对象
   
### 8.3 高速缓存
### 8.4 文件系统的注册、安装与卸载
### 8.5 限额机制
### 8.6 具体文件系统举例
### 8.7 文件系统的系统调用
### 8.8 Linux 2.4 文件系统的移植问题

## 第九章 Ext2 文件系统
### 9.2 Ext2 的磁盘布局和数据结构
### 9.3 文件的访问权限和安全
### 9.4 链接文件
### 9.5 分配策略

## 第十章 模块机制
### 10.2 实现机制
### 10.3 模块的装入和卸载
### 10.4 内核版本
### 10.5 编写内核模块

## 第十一章 设备驱动程序
### 11.1 概述
在 Linux 中输入/输出设备被分为 3 类：块设备，字符设备和网络设备。
### 11.2 设备驱动基础
### 11.3 块设备驱动程序
### 11.4 字符设备驱动程序

## 第十二章 网络
### 12.1 概述
用户进程 -> 套接字 -> 网络协议 -> 网络设备
### 12.2 网络协议
### 12.3 套接字（socket）
socket 在网络系统中的作用如下。
1. socket 位于协议之上，屏蔽了不同网络协议之间的差异。
2. socket 是网络编程的入口，它提供了大量的系统调用，构成了网络程序的主体。
3. 在 Linux 系统中，socket 属于文件系统的一部分，**网络通信可以被看作是对文件的读取**，
   使得我们对网络的控制和对文件的控制一样方便

### 12.4 套接字缓冲区（sk_buff）
套接字缓冲区是网络部分一个重要的数据结构，它描述了内存中的一块数据区域，该数据区域存放着网络传输的数据包。
### 12.5 网络设备接口
文件 drivers/net/skeleton.c 包含了网络设备驱动程序的基本骨架。

## 第十三章 Linux 启动系统
### 13.1 初始化流程
加电或复位 -> BIOS的启动 -> BootLoader -> 操作系统初始化

BIOS 的全名是基本输入输出系统（Basic Input Output System）。它的主要任务是提供 CPU 所需的启动指令。

Boot Loader 通常是一段汇编代码，存放在 MBR 中，它的主要作用就是将系统启动代码读入内存。

### 13.2 初始化的任务
### 13.3 Linux 的Boot Loader
### 13.4 进入操作系统
### 13.5 main.c 中的初始化
head.s 在最后部分调用 main.c 中的 start_kernel（）函数，从而把控制权交给了它。
所以启动程序从 start_kernel（）函数继续执行。这个函数是 main.c 乃至整个操作系统初
始化的最重要的函数，一旦它执行完了，整个操作系统的初始化也就完成了。

### 13.6 建立init 进程
Linux 将要建立的第一个进程是 init 进程，建立该进程是以调用 kernel_thread（init ，
NULL，0）这个函数的形式进行的。init 进程是很特殊的——它是 Linux 的第 1 个进程，也
是其他所有进程的父进程。

