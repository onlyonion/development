《大型网站技术架构 核心原理与案例分析》 李智慧

* 分层、分割、分布式 集群、缓存、异步 冗余、自动化、安全
* 高性能、高可用、高可靠、可伸缩、可扩展、安全

# 第1篇 概述
## 第1章 大型网站架构演化
## 第2章 大型网站架构模式
### 2.1 网站架构模式
* 分层 横向切分、水平域
* 分割 纵向切分、垂直域
* 分布式 不同模块部署到不同的服务器上，通过**远程调用**协同工作。
* 集群 多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务。提高系统的可用性。
* 缓存 将数据存放在距离计算最近的位置以加快处理速度。CDN、反向代理缓存、本地缓存、分布式缓存
* 异步 解耦合。分布式消息队列。
* 冗余
* 自动化
* 安全

## 第3章 大型网站核心架构要素
> 有关软件整体结构与组件的抽象描述，用于指导大型软件系统各个方面的设计。 ---- 维基百科 软件架构

### 3.1 性能
### 3.2 可用性
高可用的手段是冗余，部署多台服务器，互相备份。
### 3.3 伸缩性
通过不断向集群中加入服务器的手段来缓解不断上升的用户并发访问压力和不断增长的数据存储需求。
### 3.4 可扩展性
功能可扩展性；主要手段：事件驱动架构（消息队列实现）、分布式服务（服务框架）、网站服务（第三方应用）。
### 3.5 安全

# 第2篇 架构
## 第4章 高性能架构
### 4.1 网站性能测试
### 4.2 Web前端性能优化
1. 浏览器优化访问
2. CDN加速
3. 反向代理

### 4.3 应用服务器性能优化
1. 分布式缓存
2. 异步操作 消息队列异步写库
3. 使用集群
4. 代码优化 多线程（无状态对象、使用局部对象、并发访问使用锁）、资源复用（单例、对象池）、数据结构、垃圾回收
   
### 4.4 存储性能优化
1. 机械硬盘 vs 固态硬盘
2. B+树 vs LSM树
3. RAID vs HDFS

## 第5章 高可用架构
### 5.1 网站可用性的度量与考核
### 5.2 高可用的网站架构
### 5.3 高可用的应用
利用负载均衡进行无状态服务的失效转移
应用服务器集群的session管理
### 5.4 高可用的服务
分级管理、超时设置、异步调用、服务降级、幂等设计
### 5.5 高可用的数据
cap原理、BASE、数据备份、失效转移
### 5.6 高可用网站的软件质量保证
1. 网站发布
2. 自动化测试
3. 预发布验证
4. 代码控制
5. 自动化发布
6. 灰度发布

### 5.7 网站运行监控
1. 监控数据采集 
   1. 用户行为日志收集（服务器端、客户端浏览器）
   2. 服务器性能监控（load、内存、磁盘io、网络io）
   3. 运行数据报告 缓存命中率、平均响应延迟时间
2. 监控管理
   1. 系统报警
   2. 失效转移
   3. 自动优雅降级

## 第6章 伸缩性架构
### 6.1 网站架构的可伸缩性设计
不同功能进行**物理分离**实现伸缩  
单一功能通过**集群规模**实现伸缩

### 6.2 应用服务器集群的伸缩性设计
* 负载均衡层次：http重定向、dns域名解析、反向代理、ip、数据链路层（修改mac地址）
* 负载均衡算法：轮询、加权轮询、随机、**最小连接**、**源地址散列**；PS：dubbo的负载均衡

### 6.3 分布式缓存集群的伸缩性设计
分布式缓存的一致性hash算法
### 6.4 数据存储服务器集群的伸缩性设计

## 第7章 可扩展架构
### 7.1 构建可扩展的网站架构
### 7.2 利用分布式消息队列降低系统耦合性
事件驱动架构
分布式消息队列
### 7.3 利用分布式服务打造可复用的业务平台
### 7.4 可扩展的数据结构
### 7.5 利用开发平台建设网站生态圈

## 第8章 安全架构
### 8.1 应用攻击
1. XSS攻击（Cross Site Script） 篡改网页，注入html脚本
2. 注入攻击 sql注入、os注入
3. CSRF攻击（Cross Site Request Forget，跨站请求伪造）
4. ErrorCode、html注释、文件上传、路径遍历
5. Web应用防火墙
6. 网站安全漏洞扫描

### 8.2 信息加密技术及密钥安全管理
1. 单向散列算法
2. 对称加密
3. 非对称加密
4. 密钥安全管理

### 8.3 信息过滤与反垃圾
文本匹配、分类算法、黑名单
### 8.4 电子商务风险控制
1. 风险
2. 风控

# 第3篇 案例
## 第9章 淘宝网的架构演化案例分析
## 第10章 维基百科的高性能架构设计分析
## 第11章 海量分布式存储系统Doris的高可用架构师设计分析
## 第12章 网站秒杀系统架构设计案例分析
### 12.2 秒杀系统的应对策略
1. 秒杀系统独立部署
2. 秒杀商品页面静态化
3. 租借秒杀活动网络带宽
4. 动态生成随机下单页面URL

### 12.3 秒杀系统的架构设计
## 第13章 大型网站典型故障案例分析
遇到问题，解决问题，经历了这个过程，技术才能升华，人和技术才能融为一体，才知道什么技术是真正有用的。

# 第4篇 架构师
## 第14章 架构师领导艺术
### 14.1 关注人而不是关注产品
一群优秀的人做一件他们热爱的事情，一定能取得成功。
### 14.2 发掘人的优秀
是事情成就了人，而不是人成就了事。
### 14.3 共享美好蓝图
### 14.4 共同参与架构
### 14.5 学会妥协
不要企图在项目中证明自己是正确的，一定要记住，你是来做软件的，而不是来当老大的。
### 14.6 成就他人
我们活着不是为了工作，不是为了做设计、写程序，这些不是我们生活的目的。
我们活着是为了成就我们自己，而要想成就我们自己，就必须首先成就他人。

每个人都有自己成就的目标，而工作是达成自我成就的一种手段：通过工作的挑战，发掘自我的潜能，重新认知自我和世界。

## 第15章 网站架构师职场攻略
### 15.1 发现问题，寻找突破
### 15.2 提出问题，寻求支持
### 15.3 解决问题，达成绩效

## 第16章 漫话网站架构师

# 附录A 大型网站架构技术一览
1. 前端架构 浏览器架构、CDN、动静分离、图片服务器、反向代理、DNS
2. 应用层架构 开发框架、页面渲染、负载均衡、Session管理、动态页面静态化、业务拆分、虚拟化服务器
3. 服务层架构 分布式消息、分布式服务、分布式缓存、分布式配置
4. 存储层架构 分布式文件、关系数据库、NoSQL数据库、数据同步
5. 后台架构 搜索引擎、数据仓库、推荐系统
6. 数据采集与监控 浏览器数据采集、服务器业务数据采集、服务器性能数据采集、系统监控、系统报警
7. 安全架构 Web攻击、数据保护
8. 数据中心机房架构 机房架构、机柜架构、服务器架构