《支付架构实战》苏博亚 中国工信出版社

http://www.broadview.com.cn/book/6380

1. 支付概述 支付业务与支付架构简介
2. 模块详解
   - 支付网关 网关的设计、网关的高可用
   - 支付核心
   - 渠道路由
   - 收银台
   - 清结算和计费
   - 财务系统
   - 高效的核对系统
   - 商户中心
3. 支付扩展
   - 跨境支付
   - 支付运营平台
   - 支付系统高可用设计

# 第1部分 支付概述

## 第1章 支付业务与支付架构简介 2
### 1.1 支付业务简介 3
#### 1.1.1 支付牌照的诞生 3
#### 1.1.2 支付业务架构 4
### 1.2 支付系统架构演进 5
#### 1.2.1 支付系统架构发展历程 5
#### 1.2.2 理想的支付系统架构 7
### 1.3 技术选型 9
#### 1.3.1 Spring Cloud技术简介 9
#### 1.3.2 支付系统技术架构 14

# 第2部分 模块详解

## 第2章 支付网关 18
### 2.1 网关概要 18
### 2.1.1 网关的由来 18
### 2.1.2 网关的基本功能 19
### 2.2 网关的设计 21
### 2.2.1 网关架构设计 21
### 2.2.2 参数校验 22
### 2.2.3 加签与验签 25
### 2.2.4 加密与解密 29
### 2.3 网关的高可用 35
### 2.3.1 动态路由 35
### 2.3.2 负载均衡 38
### 2.3.3 依赖隔离 42
### 2.3.4 限流与熔断 45

## 第3章 支付核心 54
### 3.1 支付核心架构 54
预支付、支付、退款、支付结果查询、退款结果查询
### 3.1.1 业务简介 54
### 3.1.2 系统架构 55
### 3.1.3 接口 57
### 3.2 支付核心技术 69
### 3.2.1 生成唯一支付单号 69
### 3.2.2 百亿级数据量处理――分库分表 75

## 第4章 渠道路由 82
### 4.1 支付渠道 82
### 4.1.1 中国银联 82
### 4.1.2 中国网联 84
### 4.1.3 微信接入 86
### 4.1.4 支付宝接入 90
### 4.2 渠道路由设计 91
### 4.2.1 渠道路由架构设计 92
### 4.2.2 入金路由设计 93
### 4.2.3 出金路由设计 94
### 4.3 渠道护航 97
### 4.3.1 渠道自动切换业务简介 97
### 4.3.2 渠道护航系统架构设计 98

## 第5章 收银台 102
### 5.1 收银台架构设计 103
### 5.1.1 收银台架构 103
### 5.1.2 收银台流程处理 105
### 5.2 收银台SDK 107
### 5.2.1 收银台接口定义原则 107
### 5.2.2 收银台接口定义实践 108
### 5.2.3 收银台SDK设计 115
### 5.3 收银台路由设计 117
### 5.3.1 收银台业务简介 117
### 5.3.2 收银台路由架构 119

## 第6章 清结算和计费 123
### 6.1 清结算 123
### 6.1.1 清结算业务简介 123
### 6.1.2 清结算系统设计 124
### 6.2 计费 128
### 6.2.1 计费业务简介 128
### 6.2.2 计费系统设计 131

## 第7章 账务系统 134
### 7.1 账户体系 134
### 7.1.1 B端账户 135
### 7.1.2 C端账户 136
### 7.1.3 会计账户 136
### 7.1.4 备付金账户 139
### 7.2 账务系统设计 141
### 7.2.1 账务架构 141
### 7.2.2 热点账户处理 142

## 第8章 高效的核对体系 146
### 8.1 对账简介 146
### 8.1.1 支付机构的信息流和资金流 146
### 8.1.2 对账业务简介 149
### 8.1.3 对账架构设计 151
### 8.2 对账实现 155
### 8.2.1 渠道对账 155
### 8.2.2 银存核对 162
### 8.2.3 实时核对 165
### 8.2.4 离线核对 170
### 8.3 对账闭环功能 173
### 8.3.1 闭环功能建设 173
### 8.3.2 差错处理 174

## 第9章 商户中心 177
### 9.1 业务简介 177
#### 9.1.1 商户入驻 177
#### 9.1.2 业务架构 181
### 9.2 系统架构设计 183
#### 9.2.1 商户中心系统架构 183
#### 9.2.2 认证系统架构 185

# 第3部分 支付扩展
## 第10章 跨境支付 188
### 10.1 业务简介 188
#### 10.1.1 什么是跨境支付 188
#### 10.1.2 跨境支付相关的支付机构 191
#### 10.1.3 跨境支付业务的模式 192
### 10.2 技术实现 193
#### 10.2.1 业务流程 193
#### 10.2.2 交互设计 195

## 第11章 支付运营平台 197
### 11.1 业务简介 197
#### 11.1.1 支付运营平台发展历程 197
#### 11.1.2 支付运营平台业务逻辑 198
### 11.2 支付运营平台设计 200
#### 11.2.1 系统交互设计 200
#### 11.2.2 支付运营平台技术架构 201
### 11.3 权限模型设计 202
#### 11.3.1 菜单分类 202
#### 11.3.2 角色权限 203
#### 11.3.3 权限模型的演进 204
#### 11.3.4 用户划分 207
#### 11.3.5 理想的RBAC模型 210
#### 11.3.6 权限系统表设计 210

## 第12章 支付体系高可用设计 213
### 12.1 抽象公共能力 213
#### 12.1.1 加密系统 213
#### 12.1.2 链路追踪系统 223
### 12.2 支付稳定性 227
#### 12.2.1 支付链路压测 228
#### 12.2.2 多机房互备 230