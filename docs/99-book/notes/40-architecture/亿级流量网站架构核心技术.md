《亿级流量网站架构核心技术 跟开涛学搭建高可用高并发系统》 张开涛

* 高可用 负载均衡、隔离、限流、降级、超时与重试、回滚、压测与预案
* 高并发 应用级缓存、http缓存、多级缓存、连接池线程池、异步并发、扩容、队列

# 第1部分 概述
## 1 交易性系统设计的一些原则
* 高并发原则
  * 无状态
  * 拆分
  * 服务化
  * 消息队列
  * 数据异构
  * 缓存
  * 并发化
* 高可用原则
  * 降级
  * 限流
  * 切流量
  * 可回滚
* 业务设计原则
  * 防重设计
  * 幂等设计
  * 流程可定义
  * 状态与状态机
  * 后台系统操作可反馈
  * 后台系统审核化
  * 文档和注释
  * 备份
 
# 第2部分 高可用
## 2 负载均衡与反向代理
* DNS
* LVS 两层、四层；F5 
* Nginx 四层到七层

分层负载均衡
* 二层负载均衡 改写报文的目标MAC地址为上游服务器MAC地址，源IP地址和目标IP地址没有改变，如LVS DR模式
* 四层负载均衡 根据端口将报文转发到上流服务器（不同的IP地址+端口），如LVS NAT模式、HaProxy
* 七层负载均衡 根据端口号和应用层协议转发报文到上游服务器，如Nginx、HaProxy

核心方面
* 上游服务器配置 使用upstream server配置上游服务器
* 负载均衡算法 配置多个上游服务器时的负载均衡机制
* 失败重试机制 配置当超时或者上游服务器不存活时，是否需要重试其他上游服务器
* 服务器心跳检查 上游服务器的健康检查与心跳机制

## 3 隔离术
* 线程隔离
* 进程隔离
* 集群隔离
* 机房隔离
* 读写隔离
* 动静隔离
* 爬虫隔离
* 热点隔离
* 资源隔离
* 使用Hsytrix实现隔离
* 基于servlet3实现请求隔离
  
## 4 限流详解
* 限流算法
* 应用级限流
* 分布式限流
* 接入层限流
* 节流

## 5 降级
* 降级预案
* 自动开关降级
* 人工开关降级
* 读服务降级
* 写服务降级
* 多级降级
* 配置中心
* 使用Hystrix实现降级
* 使用Hystrix实现熔断

## 6 超时与重试机制
## 7 回滚机制
## 8 压测预案
 
# 第3部分 高并发
## 9 应用级缓存
## 10 HTTP缓存
## 11 多级缓存
## 12 连接池线程池详解
* 数据库连接池
* HttpClient连接池
* 线程池
  * Java线程池
  * Tomcat线程池配置

## 13 异步并发实战
* 同步阻塞调用
* 异步Future
* 异步Callback
* 异步编排CompletableFuture
* 异步Web服务实现
* 请求缓存
* 请求合并

## 14 如何扩容
## 15 队列术
* 应用场景 异步处理、系统解耦、数据同步、流量削峰
* 缓存队列
* 任务队列
* 消息队列
* 请求队列
* 数据总线队列
* 混合队列

## 第4部分 案例
## 16 构建需求响应式亿级商品详情页
## 17 京东商品详情页服务闭环实践
## 18 使用OpenResty开发高性能web应用
## 19 应用数据静态化架构高性能单页web应用
## 20 使用OpenResty开发web服务
## 21 使用OpenResty开发商品详情页