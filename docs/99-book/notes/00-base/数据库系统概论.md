数据库系统概论（第4版）》 王珊 高等教育出版社

# 前言
# 第一篇 基础篇
## 第1章 绪论
### 1.1 数据库系统概述
* 数据
* 数据库 存放数据的仓库
* 数据库管理系统 数据定义；数据组织、存储和管理；数据操作；数据库的事务管理和运行管理；数据库的简历和维护；
* 数据库系统 一般由数据库、数据库管理系统（及开发工具）、应用系统、数据库管理员构成。

### 1.2 数据模型
### 1.3 数据库系统结构
## 第2章 关系数据库
## 第3章 关系数据库标准语言SQL
## 第4章 数据库安全性
## 第5章 数据库完整性

# 第二篇 设计与应用开发篇
## 第6章 关系数据理论
* 无重复的列 每一列都是不可分割的数据项，同一列不能有多个值
* 主键 每个实例都可以唯一区分
* 属性不依赖于非住属性 不包含已在其他表中已包含的非主关键字信息
  
## 第7章 数据库设计
### 7.1 数据库设计概述
### 7.2 需求分析
### 7.3 概念结构设计
### 7.4 逻辑结构设计
### 7.5 数据库的物理设计
### 7.6 数据库的实施和维护

## 第8章 数据库编程
### 8.1 嵌入式SQL
### 8.2 存储过程
### 8.3 ODBC编程

# 第三篇 系统篇
## 第9章 关系查询处理和查询优化
### 9.1 关系数据库系统的查询处理
### 9.2 关系数据库系统的查询优化
### 9.3 代数优化
### 9.4 物理优化

## 第10章 数据库恢复技术
### 10.1 事务的基本概念
> 事务是用户定义的一个**数据库操作序列**，这些操作要么全做要么全不做，是一个不可分割的工作单位。

```sql
// 在SQL中，定义事务的语句有3条：
begin transaction
commit
rollback
```
事务的特性：原子性、一致性、隔离性、持续性。

### 10.2 数据库恢复概述
故障不可避免，一些具有从错误状态恢复到某已知的正确状态的功能。
### 10.3 故障的种类
1. 事务内部故障 事务撤销（undo）
2. 系统故障 指造成系统停止运转的任何事件，使得系统要重新启动。
3. 介质故障
4. 计算机病毒

### 10.4 恢复的实现技术
恢复机制涉及的两个关键问题：第一，如何建立冗余数据；第二，如何利用这些冗余数据实施数据库恢复。
1. 数据转储 静态转储、动态转储；海量转储、增量转储
2. 登记日志文件（Logging）

### 10.5 恢复策略
1. 事务故障的恢复 利用日志文件撤销（undo）此事务对数据库的修改。对用户是透明的。
2. 系统故障的恢复
   * 未完成事务对数据库的更新可能已写入数据库；已提交事务对数据库的更新可能还留在缓冲区没来得及写入数据库。
   * 恢复操作 撤销（undo，既有`begin transaction`，也有`commit`）故障发生时未完成的事务；重做（redo，日志中有`begin transaction`，无对应`commit`）已完成的事务。
3. 介质故障的恢复 磁盘上的物理数据和日志文件被破坏，最严重。

### 10.6 具有检查点的恢复技术
### 10.7 数据库镜像
根据DBA的要求，自动把整个数据库或其中的关键数据复制到另一个磁盘上。
每当主数据库更新时，DBMS自动把更新后的数据复制过去，即DBMS自动保证镜像数据与主数据库的一致性。

## 第11章 并发控制
单机处理系统中，交叉并发方式；多级处理系统中，真正的并行，同时并发方式。

!> 当多个用户并发地存取数据库时就会产生**多个事务**同时存取**同一数据**的情况。
若对并发操作不加控制就可能会存取和存储不正确的数据，破坏事务的一致性和数据库的一致性。

### 11.1 并发控制概述
!> 为了**保证事务的隔离性和一致性**，DBMS需要对并发操作进行正确**调度**。

并发操作带来的数据不一致性主要包括丢失修改、不可重复读和脏读数据等。

不可重复读
* 因修改造成两次读不一致，
* 因增加、删除早层两次读不一致，又称为幻影（plantom row）现象。

### 11.2 封锁
所谓封锁就是事务T在对某个数据对象例如表、记录操作之前，先向系统发出请求，对其加锁。

基本的封锁类型有两种：
* 排它锁，又称为写锁
* 共享锁，又称为读锁

### 11.3 活锁和死锁
#### 11.3.1 活锁
某些事务很长时间甚至永远得不到锁。

避免活锁的简单方法是采用先来先服务的策略。按请求锁的先后次序对事务排队。
#### 11.3.2 死锁
1. 死锁的预防
   * 一次封锁 必须一次将所有要使用的数据全部加锁，否则不能继续。缺点：锁范围大、降低了并发；数据不断变化
   * 顺序封锁
2. 死锁的检测
   * 超时法 缺点：可能误判；时限太长不能及时发现
   * 等待图法
3. 死锁的解除 通常选择一个处理死锁代价最小的事务，将其撤销，释放此事务持有的锁，使其他事务继续

### 11.4 并发调度的可串行性
> 多个事务的并发执行时正确的，当且仅当其结果与按某一次序串行地执行这些事务时的结果相同，称这样的调度策略为可串行化的调度。

### 11.5 两段锁协议
2PL
### 11.6 封锁的粒度
封锁对象的大小成为封锁的粒度。

封锁的粒度与系统的并发度空盒子的开销密切相关。
直观地看，封锁的粒度越大，数据库所能够封装的数据单元就越少，并发度就越小，系统开销就越小；
反之，封装的粒度越小，并发度较高，但系统开销也就越大。

## 第12章 数据库管理系统
### 12.1 DBMS的基本功能
### 12.2 DBMS的进程结构和多线索机制
### 12.3 DBMS系统结构
### 12.4 语言处理
### 12.5 数据存取层
### 12.6 缓冲区管理
### 12.7 数据库物理组织

# 第四篇 新技术篇
## 第13章 数据库技术新发展

## 第14章 分布式数据库系统
分布式数据库系统是数据库技术和网络技术两者相互渗透和有机结合的结果。
### 14.1 概述
#### 14.1.1 分布式数据库系统
> 分布式数据库由一组数据组成，这些数据物理上分布在计算机网络的不同结点上，逻辑上是属于同一个系统。

* 分布性
* 逻辑整体性

#### 14.1.2 分布式数据库系统的特点
* 数据独立性
* 集中与自治相结合的控制结构
* 适当增加数据冗余度
  * 提高系统的可靠性、可用性
  * 提高系统性能
* 全局的一致性、可串行性和可恢复性

### 14.2 分布式数据库系统的体系结构
* 全局外观模式
* 全局概念模式
* 分片模式
* 分布模式

### 14.3 查询处理和优化
#### 14.3.2 插叙处理和优化要解决的问题
1. 查询分解 全局查询分解为若干个子查询
2. 选择操作执行的次序
3. 选择执行操作的方法
   
#### 14.3.3 查询优化的目标
* 集中式 I/O代价 + CPU代价
* 分布式 I/O代价 + CPU代价 + 通信代价

### 14.4 分布事务管理
分布式数据库系统中，一个全局事务涉及多个场地上的数据更新。因此，事务是分布执行的。
可以把一个事务看成由不同场地上的若干子事务组成。
分布式事务的原子性就应该是：组成该事务的所有**子事务**要么一致地全部提交，要么一致地全部回滚。

单机数据库操作序列 --> 分布式子事务
#### 14.4.1 分布式事务的恢复
2PC
#### 14.4.2 并发控制
锁、时间戳、乐观方法

## 第15章 对象关系数据库系统
## 第16章 XML数据库
## 第17章 数据仓库与联机分析处理技术