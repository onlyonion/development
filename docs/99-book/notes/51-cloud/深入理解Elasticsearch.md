《深入理解Elasticsearch》原生第2版 张世武 译

## 第1章 Elasticsearch简介
### 1.1 Apache Lucene简介
- 文档document
- 字段field
- 词项term 搜索时的一个单位，代表了文本中的一个词。
- 词条token

每个索引由多个段（segment）组成，每个段写入一次但是查询多次。索引期间，一个段创建以后不再修改。
多个段会在段合并（segment merge）阶段合并在一起。段合并非常耗费IO，合并期间有些不再使用的信息将被清理掉。

文本分析由分析器来执行，它建立在分词器（tokenizer）、过滤器（filter）及字符映射器（character mapper）之上。

### 1.2 何为Elasticsearch
- 索引 es索引可能由一个或多个Lucene索引构成，细节由es的索引分片（shard）、复制（replica）机制机器配置决定。
- 文档 文档由字段构成，每个字段包含字段名以及一个或多个字段值。
- 类型 每个文档都有阈值对应的类型（type）定义。类比数据库表。
- 映射
- 节点 单个es的服务器实例被称为节点（node）。
- 集群 多个协同工作的Elasticsearch节点的集合被称为集群（cluster）。
- 分片 es将数据散布在多个物理的lucene索引上去。这些lucene索引被称为分片（shard），而散布这些分片的过程叫做分片处理（sharding）。
- 副本 副本（replica）解决了访问压力过大时单机无法处理所有请求的问题。

## 第2章 查询DSL进阶
### 2.1 Apache Lucene默认评分公式解释
评分是针对给定查询计算某个文档的score属性的过程。什么是文档得分？它是一个刻画文档与查询匹配程度的参数。
### 2.2 查询改写
### 2.3 查询模板
### 2.4 过滤器的使用及作用原理
### 2.5 选择正确的查询方式

## 第3章 不只是文本搜索
### 3.1 查询二次评分
查询二次评分（query rescoring），它能改变某个查询执行后返回文档的得分，改变这些文档的排序。
### 3.2 多匹配控制
### 3.3 重要词项聚合
### 3.4 文档分组
### 3.5 文档关系
### 3.6 Elasticsearch个版本中脚本的变化

## 第4章 改善用户搜索体验
### 4.1 改正用户拼写错误
### 4.2 改善查询相关性

## 第5章 分布式索引架构
### 5.1 选择合适的分配和副本数
### 5.2 路由
### 5.3 调整默认分配的分配行为
### 5.4 查询执行偏好

## 第6章 底层索引控制
### 6.1 改变Apache Lucene的评分方式
### 6.2 选择适当的目录实现 -- store模块
### 6.3 准实时、提交、更新及事务日志
### 6.4 控制索引合并
### 6.5 关于IO调节
### 6.6 理解Elasticsearch缓存

## 第7章 管理Elasticsearch
### 7.1 发现和恢复模块
启动ES节点时，查找拥有相同集群名称且在网络上可见的主节点。
如果找到了，新启动的节点加入到哪个已存在的集群，如果没找到，这个新节点就选自己成为主节点。
发现节点和组成集群的过程叫做发现（discovery）。负责发现的模块有两个作用：选主节点和发现集群的新节点。

集群建立后，一个称为恢复（recovery）的过程就开始了。
在恢复过程中，ES从网关读取元数据和索引，并且准备好保持在那里的需要使用的分片上。
主分片恢复完成之后，ES就应该可以响应外部请求了。

### 7.2 使用人类友好的Cat API
### 7.3 备份
### 7.4 联盟搜索

## 第8章 提高性能
### 8.1 使用doc values来优化查询
### 8.2 了解垃圾回收器
### 8.3 对查询做基准测试
### 8.4 热点线程
### 8.5 扩展Elasticsearch

## 第9章 开发Elasticsearch插件
