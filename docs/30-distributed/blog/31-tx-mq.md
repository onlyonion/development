
## RocketMQ事务消息
- TransactionListener
- TransactionMQProducer

### 事务半消息主题
在RocketMQ事务消息的主要流程中，一阶段的消息如何对用户不可见。
如果消息是half消息，将备份原消息的主题与消息消费队列，然后改变主题为RMQ_SYS_TRANS_HALF_TOPIC。
由于消费组未订阅该主题，故消费端无法消费half类型的消息。

### Broker回查
Broker会启动一个消息回查的定时任务，定时从事务消息queue中读取所有待反查的消息。
如果是提交事务，就把半消息从半消息队列中复制到该消息真正的topic和queue中； 如果是回滚事务，则什么都不做。
默认回查15次，如果15次回查还是无法得知事务状态，rocketmq默认回滚该消息。

### 限制
1. 事务消息不支持延时消息和批量消息
2. 事务性消息可能不止一次被检查或消费，所以消费者端需要做好消费幂等
3. 为了避免单个消息被检查太多次而导致半队列消息累积，我们默认将单个消息的检查次数限制为 15 次
4. 事务消息将在 Broker 配置文件中的参数 transactionMsgTimeout 这样的特定时间长度之后被检查。

