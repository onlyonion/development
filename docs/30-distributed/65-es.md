搜索引擎

lucene 一套信息检索工具包，但并不包含搜索引擎系统，它包含了索引结构、读写索引工具、相关性工具、排序等功能

solor 打造一款企业级的搜索引擎系统

elasticsearch lucene实现的索引中数据的读写。


Elasticsearch 和 solr 的区别
- 它们都是基于Lucene搜索服务器基础之上开发，一款优秀的，高性能的企业级搜索服务器。
- 基于分词技术构建的倒排索引的方式进行查询

区别：
1.	当实时建立索引的时候，solr会产生io阻塞，而es则不会，es查询性能要高于solr。
2.	在不断动态添加数据的时候，solr的检索效率会变的低下，而es则没有什么变化。
3.	Solr利用zookeeper进行分布式管理，而es自身带有分布式系统管理功能。Solr一般都要部署到web服务器上，比如tomcat。
    启动tomcat的时候需要配置tomcat与solr的关联。【Solr 的本质 是一个动态web项目】
4.	Solr支持更多的格式数据[xml,json,csv等]，而es仅支持json文件格式。
5.	Solr是传统搜索应用的有力解决方案，但是es更适用于新兴的实时搜索应用。
    单纯的对已有数据进行检索的时候，solr效率更好，高于es。
6.	Solr官网提供的功能更多，而es本身更注重于核心功能，高级功能多有第三方插件。


一些问题
- 分布式搜索引擎，为什么是分布式的？
- 分布式搜索引擎的架构？
- 写入与查询的流程？
- 亿级数据量如何优化查询？
  - 尽量少点的关键字段放es，尽量放到filesystem cache中命中
  - 数据预热
  - 冷热分离
  - 关联查询的，建立索引时就插入已经关联好的document
  - 深度分页性能差，尽量不允许；scroll api
- 实际如何部署？
  - es生产部署5台，每台6核64G，集群内存320G
  - es集群日增量2000万，日增量数据500MB，月增量大约6亿，15G。运行几个月，es集群数据总量100G
  - 5个索引，每个索引大约20G，每个索引分配8个shard
